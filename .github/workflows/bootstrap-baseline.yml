name: ğŸ§© Bootstrap Baseline (Empty)

on:
  workflow_dispatch:

permissions:
  contents: write

jobs:
  seed:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Create empty baseline (daily_ads = [])
        run: |
          mkdir -p data/current
          cat > data/current/baseline_90d_daily.json << 'JSON'
          {"metadata":{"timestamp":"1970-01-01T00:00:00Z","reference_date":"1970-01-01"},"daily_ads":[]}
          JSON

      - name: Compress & publish Release 'baseline'
        run: |
          sudo apt-get update && sudo apt-get install -y zstd
          zstd -19 -f -o baseline_90d_daily.json.zst data/current/baseline_90d_daily.json
          gh release create baseline baseline_90d_daily.json.zst \
            --title "Data baseline (empty seed)" \
            --notes "Seed vacÃ­o para permitir el primer deploy rÃ¡pido"
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}